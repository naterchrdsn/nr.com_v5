---
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<div class="p-4 win95-text" style="background: var(--win95-white);">
  <h2 style="font-size: 14px; font-weight: bold; margin: 0 0 8px 0;">Blog Posts</h2>

  {posts.length === 0 && (
    <p style="color: #808080;">No posts yet. Check back soon!</p>
  )}

  {posts.map((post) => (
    <a
      href={`/blog/${post.id}`}
      class="blog-list-item"
    >
      <div style="display: flex; justify-content: space-between; align-items: baseline;">
        <strong>{post.data.title}</strong>
        <span style="font-size: 10px; opacity: 0.7;">
          {post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
        </span>
      </div>
      <p style="margin: 2px 0 0 0; font-size: 11px; opacity: 0.8;">
        {post.data.description}
      </p>
    </a>
  ))}
</div>

<style>
  .blog-list-item {
    display: block;
    padding: 8px;
    margin-bottom: 4px;
    text-decoration: none;
    color: inherit;
    border: 1px solid transparent;
  }
  .blog-list-item:hover,
  .blog-list-item:focus {
    background: var(--win95-navy);
    color: var(--win95-white);
    outline: none;
  }
</style>
